<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Livre de Sorts - Merzhin</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Garamond', 'Times New Roman', serif;
            background: linear-gradient(135deg, #2c1810, #4a2c1a);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .book-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            position: relative;
        }

        .book {
            background: linear-gradient(145deg, #d4b896, #c19a6b);
            border-radius: 15px;
            box-shadow: 
                0 0 30px rgba(0,0,0,0.5),
                inset 0 0 20px rgba(255,255,255,0.1);
            position: relative;
            overflow: hidden;
        }

        .book::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="paper" patternUnits="userSpaceOnUse" width="100" height="100"><rect width="100" height="100" fill="%23f4f1e8"/><circle cx="20" cy="20" r="1" fill="%23e8e1d0" opacity="0.3"/><circle cx="80" cy="80" r="1" fill="%23e8e1d0" opacity="0.3"/><circle cx="60" cy="30" r="0.5" fill="%23d4c5a9" opacity="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23paper)"/></svg>') repeat;
            opacity: 0.3;
            pointer-events: none;
        }

        .book-spine {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 60px;
            background: linear-gradient(90deg, #8b4513, #a0522d, #8b4513);
            border-radius: 15px 0 0 15px;
            box-shadow: inset -10px 0 20px rgba(0,0,0,0.3);
        }

        .book-spine::after {
            content: 'SPELLBOOK';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: rotate(-90deg) translate(-50%, -50%);
            transform-origin: center;
            color: #d4af37;
            font-weight: bold;
            font-size: 14px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            letter-spacing: 2px;
        }

        .book-content {
            margin-left: 60px;
            padding: 40px;
            min-height: 600px;
            background: linear-gradient(to bottom, #f9f6f0, #f4f1e8);
        }

        .book-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px double #8b4513;
        }

        .book-title {
            font-size: 2.5em;
            color: #8b4513;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 10px;
            font-weight: bold;
        }

        .book-subtitle {
            font-size: 1.2em;
            color: #a0522d;
            font-style: italic;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(139, 69, 19, 0.1);
            border-radius: 10px;
            border: 1px solid #d4af37;
        }

        .search-box {
            flex: 1;
            min-width: 250px;
            padding: 10px 15px;
            border: 2px solid #8b4513;
            border-radius: 25px;
            font-size: 16px;
            background: #fff;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
        }

        .filter-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
        }

        .filter-select {
            padding: 8px 12px;
            border: 2px solid #8b4513;
            border-radius: 5px;
            background: #fff;
            font-size: 14px;
            cursor: pointer;
        }

        .spell-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .spell-card {
            background: linear-gradient(145deg, #fff, #f8f5f0);
            border: 2px solid #d4af37;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 
                0 4px 8px rgba(0,0,0,0.1),
                inset 0 1px 0 rgba(255,255,255,0.8);
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            overflow: hidden;
        }

        .spell-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, 
                var(--school-color, #8b4513), 
                var(--school-color, #8b4513));
        }

        .spell-card:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 8px 16px rgba(0,0,0,0.2),
                inset 0 1px 0 rgba(255,255,255,0.8);
        }

        .spell-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .spell-name {
            font-size: 1.4em;
            font-weight: bold;
            color: #8b4513;
            margin: 0;
        }
        
        .spell-name-en {
            font-size: 0.8em;
            font-weight: normal;
            color: #8b4513;
            font-style: italic;
            display: block;
            margin-top: 2px;
        }

        .spell-level {
            color: white;
            padding: 4px 8px;
            border-radius: 15px;
            font-size: 0.9em;
            font-weight: bold;
            white-space: nowrap;
        }

        .spell-level.level-0 {
            background: #ffffff;
            color: #333;
            border: 2px solid #ddd;
        }

        .spell-level.level-1 {
            background: linear-gradient(135deg, #ffffff, #ffd700);
            color: #333;
        }

        .spell-level.level-2 {
            background: linear-gradient(135deg, #ffd700, #ff8c00);
            color: white;
        }

        .spell-level.level-3 {
            background: linear-gradient(135deg, #ff8c00, #228b22);
            color: white;
        }

        .spell-level.level-4 {
            background: linear-gradient(135deg, #228b22, #0066cc);
            color: white;
        }

        .spell-level.level-5 {
            background: linear-gradient(135deg, #0066cc, #800080);
            color: white;
        }

        .spell-level.level-6 {
            background: linear-gradient(135deg, #800080, #8b4513);
            color: white;
        }

        .spell-level.level-7 {
            background: linear-gradient(135deg, #8b4513, #000000);
            color: white;
        }

        .spell-level.level-8 {
            background: linear-gradient(135deg, #000000, #dc143c);
            color: white;
        }

        .spell-level.level-9 {
            background: #dc143c;
            color: white;
        }

        .spell-school {
            color: var(--school-color, #8b4513);
            font-style: italic;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .spell-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 15px;
            font-size: 0.9em;
        }

        .detail-item {
            display: flex;
            flex-direction: column;
        }

        .detail-label {
            font-weight: bold;
            color: #8b4513;
            margin-bottom: 2px;
        }

        .detail-value {
            color: #333;
        }

        .spell-classes {
            margin-bottom: 10px;
        }

        .class-tag {
            display: inline-block;
            background: rgba(139, 69, 19, 0.1);
            color: #8b4513;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.8em;
            margin-right: 4px;
            margin-bottom: 2px;
            border: 1px solid #d4af37;
        }

        .spell-description {
            line-height: 1.6;
            color: #2c1810;
            margin-bottom: 10px;
            text-align: justify;
        }

        .higher-levels {
            background: rgba(212, 175, 55, 0.1);
            padding: 10px;
            border-radius: 5px;
            border-left: 4px solid #d43737;
            margin-top: 10px;
            font-size: 0.9em;
        }

        .spell-origin {
            text-align: right;
            font-size: 0.8em;
            color: #666;
            font-style: italic;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #eee;
        }
        
        .spell-comment {
            background: rgba(139, 69, 19, 0.05);
            padding: 10px;
            border-radius: 5px;
            font-size: 0.9em;
            color: #8b4513;
            margin-top: 10px;
            border-left: 4px solid #999998;
            font-style: italic;
        }

        .learning-source {
            background: rgba(40, 167, 69, 0.1);
            padding: 8px;
            border-radius: 5px;
            border-left: 4px solid #28a745;
            margin-top: 10px;
            font-size: 0.9em;
        }

        .learning-source-label {
            font-weight: bold;
            color: #28a745;
            margin-bottom: 2px;
        }

        .spell-icons {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
        }

        .spell-icon {
            display: inline-flex;
            align-items: center;
            gap: 3px;
            padding: 2px 6px;
            border-radius: 12px;
            font-size: 0.7em;
            font-weight: bold;
            text-transform: uppercase;
        }

        .ritual-icon {
            background: #6f42c1;
            color: white;
        }

        .concentration-icon {
            background: #fd7e14;
            color: white;
        }

        .reaction-icon {
            background: #dc3545;
            color: white;
        }

        .ritual-icon::before {
            content: "üïØÔ∏è";
            font-size: 0.9em;
        }

        .concentration-icon::before {
            content: "üß†";
            font-size: 0.9em;
        }

        .reaction-icon::before {
            content: "‚ö°";
            font-size: 0.9em;
        }

        .spell-score {
            display: inline-block;
            margin-left: 8px;
            vertical-align: middle;
        }

        .score-icon {
            font-size: 0.8em;
            margin-right: 1px;
        }

        .score-star {
            color: #ff9900;
        }

        .score-empty {
            color: #666;
        }

        .learned-status {
            position: absolute;
            top: 50px;
            right: 10px;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7em;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .learned-status.learned {
            background: #28a745;
            color: white;
        }

        .learned-status.not-learned {
            background: #dc3545;
            color: white;
        }

        .spell-card.not-learned {
            opacity: 0.7;
            position: relative;
        }

        .spell-card.not-learned::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 10px,
                rgba(220, 53, 69, 0.1) 10px,
                rgba(220, 53, 69, 0.1) 20px
            );
            pointer-events: none;
        }

        /* School colors */
        .spell-card[data-school="Abjuration"] { --school-color: #4169E1; }
        .spell-card[data-school="Invocation"] { --school-color: #DC143C; }
        .spell-card[data-school="Divination"] { --school-color: #FFD700; }
        .spell-card[data-school="Enchantement"] { --school-color: #FF69B4; }
        .spell-card[data-school="√âvocation"] { --school-color: #FF4500; }
        .spell-card[data-school="Illusion"] { --school-color: #9370DB; }
        .spell-card[data-school="N√©cromancie"] { --school-color: #2F4F4F; }
        .spell-card[data-school="Transmutation"] { --school-color: #228B22; }

        .stats-container {
            margin-bottom: 30px;
        }

        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
            padding: 15px;
            background: rgba(139, 69, 19, 0.1);
            border-radius: 10px;
            flex-wrap: wrap;
        }

        .stats-bar.learned-stats {
            background: rgba(40, 167, 69, 0.1);
            border: 1px solid rgba(40, 167, 69, 0.3);
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #8b4513;
        }

        .stat-label {
            color: #a0522d;
            font-size: 0.9em;
        }

        @media (max-width: 768px) {
            .book-container {
                margin: 10px;
                padding: 10px;
            }
            
            .book-content {
                padding: 20px;
                margin-left: 40px;
            }
            
            .book-spine {
                width: 40px;
            }
            
            .spell-grid {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .search-box {
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="book-container">
        <div class="book">
            <div class="book-spine"></div>
            <div class="book-content">
                <div class="book-header">
                    <h1 class="book-title">Guide mod√©r√©ment pr√©visible des incantations improbables</h1>
                    <p class="book-subtitle">Par Merzhin</p>
                </div>

                <div class="stats-container">
                    <div class="stats-bar">
                        <div class="stat-item">
                            <div class="stat-number" id="total-spells">0</div>
                            <div class="stat-label">Total Sorts</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="total-cantrips">0</div>
                            <div class="stat-label">Cantrips</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="total-level1">0</div>
                            <div class="stat-label">Niveau 1</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="total-level2">0</div>
                            <div class="stat-label">Niveau 2</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="total-level3">0</div>
                            <div class="stat-label">Niveau 3</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="total-level4">0</div>
                            <div class="stat-label">Niveau 4</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="total-level5">0</div>
                            <div class="stat-label">Niveau 5</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="total-level6">0</div>
                            <div class="stat-label">Niveau 6</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="total-level7">0</div>
                            <div class="stat-label">Niveau 7</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="total-level8">0</div>
                            <div class="stat-label">Niveau 8</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="total-level9">0</div>
                            <div class="stat-label">Niveau 9</div>
                        </div>
                    </div>
                    
                    <div class="stats-bar learned-stats">
                        <div class="stat-item">
                            <div class="stat-number" id="learned-spells">0</div>
                            <div class="stat-label">Sorts Appris</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="learned-cantrips">0</div>
                            <div class="stat-label">Cantrips</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="learned-level1">0</div>
                            <div class="stat-label">Niveau 1</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="learned-level2">0</div>
                            <div class="stat-label">Niveau 2</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="learned-level3">0</div>
                            <div class="stat-label">Niveau 3</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="learned-level4">0</div>
                            <div class="stat-label">Niveau 4</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="learned-level5">0</div>
                            <div class="stat-label">Niveau 5</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="learned-level6">0</div>
                            <div class="stat-label">Niveau 6</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="learned-level7">0</div>
                            <div class="stat-label">Niveau 7</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="learned-level8">0</div>
                            <div class="stat-label">Niveau 8</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="learned-level9">0</div>
                            <div class="stat-label">Niveau 9</div>
                        </div>
                    </div>
                </div>

                <div class="controls">
                    <input type="text" id="search" class="search-box" placeholder="Rechercher un sort...">
                    
                    <div class="filter-group">
                        <select id="level-filter" class="filter-select">
                            <option value="">Tous les niveaux</option>
                            <option value="0">Cantrips</option>
                            <option value="1">Niveau 1</option>
                        </select>
                        
                        <select id="school-filter" class="filter-select">
                            <option value="">Toutes les √©coles</option>
                        </select>
                        
                        <select id="class-filter" class="filter-select">
                            <option value="">Toutes les classes</option>
                        </select>
                        
                        <select id="learned-filter" class="filter-select">
                            <option value="">Tous les sorts</option>
                            <option value="learned">Sorts appris</option>
                            <option value="not-learned">Sorts non appris</option>
                        </select>
                    </div>
                </div>

                <div class="spell-grid" id="spell-grid">
                    <!-- Spells will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Embedded spell data as fallback -->
    <script type="application/json" id="spell-data">
[
    {
        "name": "Main de mage",
        "name_en": "Mage Hand",
        "level": 0,
        "school": "Invocation",
        "class": ["Barde", "Ensorceleur", "Occultiste", "Magicien"],
        "casting_time": "Action",
        "range": "9 m",
        "components": ["V", "S"],
        "concentration": false,
        "ritual": false,
        "reaction": false,
        "duration": "1 minute",
        "description": "Une main spectrale et flottante appara√Æt √† un endroit que vous choisissez √† port√©e. La main reste active pendant toute la dur√©e du sort. Elle dispara√Æt si elle s'√©loigne de vous de plus de 9 m√®tres ou si vous relancez ce sort.<br><br><strong>Utilisation initiale :</strong><br>Lorsque vous lancez ce sort, vous pouvez utiliser la main pour :<br>‚Ä¢ Manipuler un objet<br>‚Ä¢ Ouvrir une porte ou un contenant d√©verrouill√©<br>‚Ä¢ Ranger ou r√©cup√©rer un objet d'un contenant ouvert<br>‚Ä¢ Vider le contenu d'une fiole<br><br><strong>Tours ult√©rieurs :</strong><br>Par une action Magie lors de vos tours ult√©rieurs, vous pouvez continuer de contr√¥ler la main ainsi. Cette action vous permet de d√©placer la main jusqu'√† 9 m√®tres.<br><br><strong>Limitations :</strong><br>La main ne peut pas attaquer, ni activer des objets magiques, ni porter plus de 5 kg.",
        "higher_levels": "",
        "origin": "Player's Handbook 2024 (BR)",
        "learned": false,
        "learning_source": "",
        "comment": "D√©placer des objets √† distance : tirez des leviers douteux, ouvrez des portes suspectes, triez votre linge enchant√© (attention aux chaussettes dimensionnelles), et √©vitez de risquer vos phalanges. Ne fonctionne pas sur les tartes explosives. Ne me demandez pas pourquoi.",
        "score": 4
    },
    {
        "name": "Trait de feu",
        "name_en": "Fire Bolt",
        "level": 0,
        "school": "√âvocation",
        "class": ["Ensorceleur", "Magicien"],
        "casting_time": "Action",
        "range": "36 m",
        "components": ["V", "S"],
        "concentration": false,
        "ritual": false,
        "reaction": false,
        "duration": "Instantan√©e",
        "description": "Vous lancez une particule de feu sur une cr√©ature ou un objet √† port√©e.<br><br><strong>Attaque :</strong><br>Effectuez une attaque de sort √† distance contre la cible.<br><br><strong>En cas de succ√®s :</strong><br>‚Ä¢ La cible subit 1d10 d√©g√¢ts de feu<br>‚Ä¢ Un objet inflammable touch√© par ce sort commence √† br√ªler s'il n'est pas port√©",
        "higher_levels": "<strong>Am√©lioration de sort mineur.</strong> Les d√©g√¢ts augmentent de 1d10 lorsque vous atteignez les niveaux 5 (2d10), 11 (3d10) et 17 (4d10).",
        "origin": "Player's Handbook 2024 (BR)",
        "learned": false,
        "learning_source": "",
        "comment": "Port√©e excellente et d√©g√¢ts honn√™tes. L'option de r√©f√©rence quand seuls les d√©g√¢ts comptent. Glas fun√®bre frappe plus fort et avec un meilleur type de d√©g√¢ts, mais Trait de feu a le double de port√©e. Notez qu'avec 14 en Dext√©rit√©, une arbal√®te l√©g√®re reste aussi efficace (voire plus) des niveaux 1 √† 4. L'absence de ce tour aux bas niveaux n'est donc nullement dramatique.",
        "score": 3
    },
    {
        "name": "Piq√ªre mentale",
        "name_en": "Mind Sliver",
        "level": 0,
        "school": "Enchantement",
        "class": ["Ensorceleur", "Occultiste", "Magicien"],
        "casting_time": "Action",
        "range": "18 m",
        "components": ["V"],
        "concentration": false,
        "ritual": false,
        "reaction": false,
        "duration": "1 round",
        "description": "Vous essayez de rompre temporairement l'esprit d'une cr√©ature que vous pouvez voir √† port√©e.<br><br><strong>Jet de sauvegarde :</strong><br>La cible doit r√©ussir un jet de sauvegarde d'Intelligence.<br><br><strong>En cas d'√©chec :</strong><br>‚Ä¢ Subit 1d6 d√©g√¢ts psychiques<br>‚Ä¢ Soustrait 1d4 du prochain jet de sauvegarde qu'elle effectue avant la fin de votre prochain tour",
        "higher_levels": "<strong>Am√©lioration de sort mineur.</strong> Les d√©g√¢ts augmentent de 1d6 lorsque vous atteignez les niveaux 5 (2d6), 11 (3d6) et 17 (4d6).",
        "origin": "Player's Handbook 2024 (BR)",
        "learned": true,
        "learning_source": "Librairie de l'Unseen University",
        "comment": "(Optionnel) : Les d√©g√¢ts psychiques inflig√©s sur un jet de sauvegarde d'Intelligence sont d√©j√† spectaculaires en soi. Les jets de sauvegarde d'Intelligence figurent parmi les plus faibles de mani√®re constante, et la r√©sistance ou l'immunit√© aux d√©g√¢ts psychiques est rare (quoique pr√©sente, surtout chez les ennemis sans cervelle, comme les zombies). Cela seul suffit √† faire de la Piq√ªre Mentale l'un des sorts √† effet fiable les plus convaincants de la 5e, mais ce n'est que le d√©but. Avec uniquement des composantes verbales, la Piq√ªre Mentale peut √™tre incant√©e m√™me si vos mains sont occup√©es ou que vous √™tes ligot√© ‚Äì une aubaine pour tout adepte du Don de la Guerre. Elle impose √©galement un malus de -1d4 au prochain jet de sauvegarde de la cible, la rendant plus vuln√©rable √† vos sorts les plus retors. Vous pouvez aussi vous contenter de frapper encore et encore avec la Fente Mentale, en regardant vos ennemis tenter d√©sesp√©r√©ment de r√©sister √† votre DD de sauvegarde avec un bonus de +0‚Ä¶ et le petit malus de -1d4 qui leur vient tout droit de votre coup pr√©c√©dent.",
        "score": 4
    },
    {
        "name": "Illusion Mineure",
        "name_en": "Minor Illusion",
        "level": 0,
        "school": "Illusion",
        "class": ["Barde", "Ensorceleur", "Occultiste", "Magicien"],
        "casting_time": "Action",
        "range": "9 m",
        "components": ["S", "M (un peu de laine brute)"],
        "concentration": false,
        "ritual": false,
        "reaction": false,
        "duration": "1 minute",
        "description": "Le lanceur de sorts cr√©e un son ou l'image d'un objet √† port√©e pendant une minute.<br><br><strong>Fin de l'illusion :</strong><br>Cette illusion se termine √©galement si :<br>‚Ä¢ Elle est r√©voqu√©e au prix d'une action<br>‚Ä¢ Ce sort est lanc√© une nouvelle fois<br><br><strong>Si l'illusion est un son :</strong><br>‚Ä¢ Le volume peut aller d'un simple chuchotement √† un cri<br>‚Ä¢ Il peut s'agir de votre voix, de la voix de quelqu'un d'autre, du rugissement d'un lion, d'un roulement de tambours, ou tout autre son que vous choisissez<br>‚Ä¢ Le son peut autant ne pas diminuer en intensit√© pendant la dur√©e du sort qu'√™tre discret et produit √† diff√©rents instants dans cet intervalle de temps<br><br><strong>Si l'illusion est une image ou un objet :</strong><br>‚Ä¢ Exemples : une chaise, des traces de pas boueuses ou un petit coffre<br>‚Ä¢ Ne peut pas √™tre plus large qu'un cube de 1,50 m√®tre d'ar√™te<br>‚Ä¢ Cette image ne peut produire de son, lumi√®re, odeur ou tout autre effet sensoriel<br>‚Ä¢ Une interaction physique avec l'image r√©v√®le l'illusion, car elle peut √™tre travers√©e par n'importe quoi<br><br><strong>D√©tection de l'illusion :</strong><br>Si une cr√©ature utilise une action pour examiner le son ou l'image, elle peut comprendre qu'il s'agit d'une illusion gr√¢ce √† un jet d'Intelligence (Investigation) contre le DD de sauvegarde de votre sort. Si une cr√©ature discerne l'illusion pour ce qu'elle est, l'illusion s'√©vanouit pour la cr√©ature.",
        "origin": "Player's Handbook (SRD)",
        "learned": true,
        "learning_source": "Dans le dortoir. Tr√®s utile pour faire le mur",
        "comment": "Ample marge de man≈ìuvre pour des usages cr√©atifs et trompeurs. Le cube de 1,50 m√®tre de c√¥t√© offre largement de quoi cr√©er quelque chose derri√®re quoi se cacher, √† condition que vos ennemis ne vous voient pas fa√ßonner l'illusion.",
        "score": 4
    },
    {
        "name": "Prestidigitation",
        "name_en": "Prestidigitation",
        "level": 0,
        "school": "Transmutation",
        "class": ["Barde", "Sorcier", "Magicien", "Ensorceleur"],
        "casting_time": "Action",
        "range": "3 m (10 feet)",
        "components": ["V", "S"],
        "concentration": false,
        "ritual": false,
        "reaction": false,
        "duration": "Jusqu'√† 1 heure",
        "description": "Vous cr√©ez un effet magique dans la port√©e. Choisissez l'effet parmi les options ci-dessous. Si vous lancez ce sort plusieurs fois, vous pouvez avoir jusqu'√† trois de ses effets non instantan√©s actifs en m√™me temps.\n\nEffet sensoriel. Vous cr√©ez un effet sensoriel instantan√© et inoffensif, comme une pluie d'√©tincelles, un souffle de vent, des notes musicales faibles ou une odeur √©trange. Jeu de feu. Vous allumez ou √©teignez instantan√©ment une bougie, une torche ou un petit feu de camp. Nettoyer ou salir. Vous nettoyez ou salissez instantan√©ment un objet ne d√©passant pas 1 pied cube. Sensation mineure. Vous refroidissez, r√©chauffez ou aromatisez jusqu'√† 1 pied cube de mati√®re non vivante pendant 1 heure. Marque magique. Vous faites appara√Ætre une couleur, une petite marque ou un symbole sur un objet ou une surface pendant 1 heure. Cr√©ation mineure. Vous cr√©ez un bibelot non magique ou une image illusoire qui peut tenir dans votre main. Cela dure jusqu'√† la fin de votre prochain tour. Un bibelot ne peut infliger aucun dommage et n'a aucune valeur mon√©taire.",
        "origin": "Player's Handbook (SRD)",
        "learned": false,
        "learning_source": "",
        "comment": "D√®s que vous voulez accomplir un petit tour de magie qui ne figure pas dans un autre sort, la Prestidigitation est g√©n√©ralement la solution. Ce sort est d'une polyvalence rare. Pour des id√©es sur la mani√®re de tirer le meilleur parti de la Prestidigitation, voyez mon <a href=\"https://rpgbot.net/dnd5/characters/spells/prestidigitation/\" target=\"_blank\">Guide Pratique de la Prestidigitation</a>.",
        "score": 4
    },
    {
        "name": "Fa√ßonnage de l'eau",
        "name_en": "Shape Water",
        "level": 0,
        "school": "Transmutation",
        "class": ["Druide", "Ensorceleur", "Magicien"],
        "casting_time": "Action",
        "range": "9 m",
        "components": ["S"],
        "concentration": false,
        "ritual": false,
        "reaction": false,
        "duration": "Instantan√©e ou 1 heure",
        "description": "Choisissez un cube d'eau visible de 1,50 m√®tre d'ar√™te dans la port√©e du sort.<br><br><strong>Vous pouvez alors le manipuler d'une des fa√ßons suivantes :</strong><br><br>‚Ä¢ <strong>D√©placer l'eau :</strong> Vous d√©placez instantan√©ment ou modifiez le sens du courant selon vos directives jusqu'√† 1,50 m√®tre dans n'importe quelle direction. Ce mouvement n'a pas assez de force pour causer des d√©g√¢ts<br><br>‚Ä¢ <strong>Animer l'eau :</strong> Vous pouvez faire apparaitre des formes simples dans l'eau et les animer selon vos instructions. Ce changement dure 1 heure<br><br>‚Ä¢ <strong>Modifier l'apparence :</strong> Vous modifiez la couleur ou l'opacit√© de l'eau. L'eau doit √™tre transform√©e de fa√ßon homog√®ne. Ce changement dure 1 heure<br><br>‚Ä¢ <strong>Geler l'eau :</strong> Vous gelez l'eau, √† condition qu'elle ne contienne aucune cr√©ature. L'eau d√©g√®le au bout de 1 heure<br><br><strong>Limitation :</strong><br>Si vous lancez ce sort plusieurs fois, vous ne pouvez avoir que deux de ces effets non-instantan√©s actifs √† la fois, et vous pouvez en dissiper un en une action.",
        "origin": "Xanathar's Guide to Everything (XGE)",
        "learned": true,
        "learning_source": "Librairie de l'Unseen University",
        "comment": "Aussi exploitable que Prestidigitation : geler un cube d'eau et l'√©craser sur quelqu'un, briser une serrure en la gelant, √©riger un d√¥me de glace, bloquer un couloir, construire un pont par segments de 1,50 m‚Ä¶ Si vous avez un tonneau d'eau et ce tour, vous avez une r√©ponse √† tout. Ce sort enterre ses √©quivalents √©l√©mentaires, et c'est bien m√©rit√©. Voir mon <a href=\"https://rpgbot.net/dnd5/characters/shape-water\" target=\"_blank\">Guide Pratique du Modelage de l'Eau</a> pour plus d'id√©es brillamment discutables.",
        "score": 4
    },
    {
        "name": "√âruption de lames",
        "name_en": "Sword Burst",
        "level": 0,
        "school": "Invocation",
        "class": ["Ensorceleur", "Magicien", "Occultiste"],
        "casting_time": "Action",
        "range": "Personnelle (rayon de 1,50 m)",
        "components": ["V"],
        "concentration": false,
        "ritual": false,
        "reaction": false,
        "duration": "Instantan√©e",
        "description": "Vous cr√©ez temporairement un cercle de lames spectrales autour de vous.<br><br><strong>Effet :</strong><br>Toutes les autres cr√©atures dans un rayon de 1,50 m√®tre autour de vous doivent r√©ussir un jet de sauvegarde de Dext√©rit√© ou subir 1d6 d√©g√¢ts de force.",
        "higher_levels": "Les d√©g√¢ts de ce sort augmentent de 1d6 lorsque vous atteignez les niveaux 5 (2d6), 11 (3d6) et 17 (4d6).",
        "origin": "Tasha's Cauldron of Everything",
        "learned": false,
        "learning_source": "",
        "comment": "(Optionnel) : Si vous vous retrouvez dans une situation o√π ce sort a du sens, vous devriez probablement √™tre en train de fuir‚Ä¶ sauf si vous √™tes un Chante-Lame. Pour le Chante-Lame, c'est un excellent moyen de g√©rer les foules lorsque vous √™tes en m√™l√©e.",
        "score": 2
    },
    {
        "name": "Coup au but",
        "name_en": "True Strike",
        "level": 0,
        "school": "√âvocation",
        "class": ["Barde", "Ensorceleur", "Magicien", "Occultiste"],
        "casting_time": "Action",
        "range": "Personnelle",
        "components": ["S", "M (une arme dont vous avez la ma√Ætrise, d'une valeur minimale de 1 pc)"],
        "concentration": false,
        "ritual": false,
        "reaction": false,
        "duration": "Instantan√©e",
        "description": "Guid√© par un √©clair magique, vous effectuez une attaque avec l'arme utilis√©e pour lancer le sort.<br><br><strong>M√©caniques d'attaque :</strong><br>‚Ä¢ L'attaque utilise votre caract√©ristique d'incantation pour les jets d'attaque et de d√©g√¢ts, au lieu d'utiliser la Force ou la Dext√©rit√©<br>‚Ä¢ Si l'attaque inflige des d√©g√¢ts, ceux-ci peuvent √™tre radiants ou du type de d√©g√¢ts normal de l'arme (selon votre choix)",
        "higher_levels": "Am√©lioration de sort mineur. Que vous infligez des d√©g√¢ts radiants ou du type de d√©g√¢ts normal de l'arme, les d√©g√¢ts augmentent de 1d6 lorsque vous atteignez les niveaux 5 (2d6), 11 (3d6) et 17 (4d6).",
        "origin": "Player's Handbook 2024 (BR)",
        "learned": false,
        "learning_source": "",
        "comment": "En g√©n√©ral, vous obtiendrez de meilleurs r√©sultats en attaquant deux fois plut√¥t qu'en utilisant ce sort et en attaquant une seule fois ensuite.",
        "score": 1
    },
    {
        "name": "Absorption des √©l√©ments",
        "name_en": "Absorb Elements",
        "level": 1,
        "school": "Abjuration",
        "class": ["Druide", "Ensorceleur", "Magicien", "R√¥deur"],
        "casting_time": "R√©action, que vous prenez lorsque vous subissez des d√©g√¢ts d'acide, de froid, de feu, de foudre ou de tonnerre",
        "range": "Personnelle",
        "components": ["S"],
        "concentration": false,
        "ritual": false,
        "reaction": true,
        "duration": "1 round",
        "description": "Le sort capte une partie de l'√©nergie entrante, ce qui r√©duit son effet sur vous et la stocke pour votre prochaine attaque au corps √† corps.<br><br><strong>Effets imm√©diats :</strong><br>‚Ä¢ Vous obtenez une r√©sistance √† ce type de d√©g√¢ts jusqu'au d√©but de votre prochain tour<br><br><strong>Effet retard√© :</strong><br>‚Ä¢ La premi√®re fois que vous touchez avec une attaque au corps √† corps lors de votre prochain tour, la cible subit 1d6 d√©g√¢ts suppl√©mentaires du type d'√©l√©ment cibl√©, et le sort se termine",
        "higher_levels": "Lorsque vous lancez ce sort en utilisant un emplacement de sort de niveau 2 ou sup√©rieur, les d√©g√¢ts suppl√©mentaires augmentent de 1d6 pour chaque niveau d'emplacement au-del√† du niveau 1.",
        "origin": "Xanathar's Guide to Everything",
        "learned": false,
        "learning_source": "",
        "comment": "Une excellente option d√©fensive √† tout niveau : elle pourra vous sauver la vie face √† une source impr√©visible de d√©g√¢ts √©l√©mentaires, comme un pi√®ge ou un sort. Le bonus de d√©g√¢ts sur votre prochaine attaque est largement inutile, mais l'utiliser reste toujours un petit frisson bienvenu.",
        "score": 4
    },
    {
        "name": "Alarme",
        "name_en": "Alarm",
        "level": 1,
        "school": "Abjuration",
        "class": ["R√¥deur", "Magicien"],
        "casting_time": "1 minute ou Rituel",
        "range": "9 m",
        "components": ["V", "S", "M (une cloche et du fil d'argent)"],
        "concentration": false,
        "ritual": true,
        "reaction": false,
        "duration": "8 heures",
        "description": "Vous placez une alarme contre les intrusions. Choisissez une porte, une fen√™tre ou une zone √† port√©e qui ne d√©passe pas un cube de 6 m√®tres.<br><br><strong>Fonctionnement :</strong><br>‚Ä¢ Jusqu'√† la fin du sort, une alarme vous alerte chaque fois qu'une cr√©ature touche ou p√©n√®tre dans la zone prot√©g√©e<br>‚Ä¢ Lorsque vous lancez le sort, vous pouvez d√©signer des cr√©atures qui ne d√©clencheront pas l'alarme<br><br><strong>Types d'alarme :</strong><br>Vous choisissez si l'alarme est audible ou mentale :<br><br>‚Ä¢ <strong>Alarme audible :</strong> L'alarme produit le son d'une clochette pendant 10 secondes dans un rayon de 18 m√®tres de la zone prot√©g√©e<br><br>‚Ä¢ <strong>Alarme mentale :</strong> Vous √™tes alert√© par un signal mental si vous √™tes dans un rayon de 1,5 kilom√®tre de la zone prot√©g√©e. Ce signal vous r√©veille si vous dormez",
        "higher_levels": "",
        "origin": "Player's Handbook 2024 (BR)",
        "learned": true,
        "learning_source": "Librairie de l'Unseen University",
        "comment": "Ne le pr√©parez jamais, mais lancez-le au moins une fois en rituel √† chaque repos long.",
        "score": 4
    },
    {
        "name": "Compr√©hension des langues",
        "name_en": "Comprehend Languages",
        "level": 1,
        "school": "Divination",
        "class": ["Barde", "Ensorceleur", "Occultiste", "Magicien"],
        "casting_time": "Action ou Rituel",
        "range": "Personnelle",
        "components": ["V", "S", "M (une pinc√©e de suie et de sel)"],
        "concentration": false,
        "ritual": true,
        "reaction": false,
        "duration": "1 heure",
        "description": "Pendant toute la dur√©e du sort, vous comprenez le sens litt√©ral de toute langue que vous entendez ainsi que le langage des signes.<br><br><strong>Langues √©crites :</strong><br>‚Ä¢ Vous comprenez √©galement toute langue √©crite que vous voyez, mais vous devez toucher la surface sur laquelle les mots sont √©crits<br>‚Ä¢ Il faut environ une minute pour lire une page de texte<br><br><strong>Limitation :</strong><br>Ce sort ne d√©code pas les symboles ni les messages secrets",
        "higher_levels": "",
        "origin": "Player's Handbook 2024 (BR)",
        "learned": true,
        "learning_source": "Librairie de l'Unseen University",
        "comment": "Lancez ce sort en rituel. Malheureusement, c'est un sort qui ne cible que vous, donc votre communication sera √† sens unique‚Ä¶ sauf si ce √† quoi vous parlez a aussi trouv√© une solution.",
        "score": 4
    },
    {
        "name": "Simulacre de vie",
        "name_en": "False Life",
        "level": 1,
        "school": "N√©cromancie",
        "class": ["Ensorceleur", "Magicien"],
        "casting_time": "Action",
        "range": "Personnelle",
        "components": ["V", "S", "M (une goutte d'alcool)"],
        "concentration": false,
        "ritual": false,
        "reaction": false,
        "duration": "Instantan√©e",
        "description": "<strong>Effet :</strong><br>Vous gagnez 2d4 + 4 points de vie temporaires.",
        "higher_levels": "Vous gagnez 5 points de vie temporaires suppl√©mentaires pour chaque niveau d'emplacement de sort sup√©rieur √† 1.",
        "origin": "Player's Handbook 2024 (BR)",
        "learned": false,
        "learning_source": "",
        "comment": "Un excellent moyen d'utiliser vos emplacements de sorts de bas niveau lorsqu'ils cessent d'√™tre efficaces en combat. 1d4+4 points de vie, c'est autant que ce qu'un magicien peut esp√©rer d'un d√© de vie suppl√©mentaire, ce qui peut faire une √©norme diff√©rence pour une classe aussi fragile.",
        "score": 4
    },
    {
        "name": "Feuille morte",
        "name_en": "Feather Fall",
        "level": 1,
        "school": "Transmutation",
        "class": ["Barde", "Ensorceleur", "Magicien"],
        "casting_time": "R√©action, que vous prenez lorsque vous ou une cr√©ature que vous pouvez voir dans un rayon de 18 m tombe",
        "range": "18 m",
        "components": ["V", "M (une petite plume ou un morceau de duvet)"],
        "concentration": false,
        "ritual": false,
        "reaction": true,
        "duration": "1 minute",
        "description": "Choisissez jusqu'√† cinq cr√©atures en chute libre √† port√©e.<br><br><strong>Effet :</strong><br>‚Ä¢ La vitesse de chute d'une cr√©ature est r√©duite √† 18 m√®tres par round jusqu'√† la fin du sort<br>‚Ä¢ Si une cr√©ature atterrit avant la fin du sort, elle ne subit aucun d√©g√¢t de la chute et le sort prend fin pour elle",
        "higher_levels": "",
        "origin": "Player's Handbook 2024 (BR)",
        "learned": false,
        "learning_source": "",
        "comment": "Quelqu'un dans le groupe doit avoir ce sort en permanence, et vous √™tes un quelqu'un. Mourir de d√©g√¢ts de chute est un moyen ridicule et embarrassant de finir.",
        "score": 4
    },
    {
        "name": "Appel de familier",
        "name_en": "Find Familiar",
        "level": 1,
        "school": "Invocation",
        "class": ["Magicien"],
        "casting_time": "1 heure ou Rituel",
        "range": "3 m",
        "components": ["V", "S", "M (encens en combustion d'une valeur de 10+ po, que le sort consomme)"],
        "concentration": false,
        "ritual": true,
        "reaction": false,
        "duration": "Instantan√©e",
        "description": "Vous obtenez les services d'un familier, un esprit qui prend une forme animale de votre choix.<br><br><strong>Formes disponibles :</strong><br>Chauve-souris, Chat, Grenouille, Faucon, L√©zard, Pieuvre, Chouette, Rat, Corbeau, Araign√©e, Belette, ou une autre B√™te qui a un facteur de puissance de 0.<br><br><strong>Caract√©ristiques du familier :</strong><br>‚Ä¢ Appara√Æt dans un espace inoccup√© √† port√©e<br>‚Ä¢ A les statistiques de la forme choisie<br>‚Ä¢ Est un C√©leste, une F√©e ou un Fi√©lon (votre choix) au lieu d'une B√™te<br>‚Ä¢ Agit ind√©pendamment de vous, mais ob√©it √† vos ordres<br><br><strong>Connexion t√©l√©pathique :</strong><br>‚Ä¢ Communication t√©l√©pathique dans un rayon de 30 m√®tres<br>‚Ä¢ Par une action bonus : voir √† travers ses yeux et entendre ce qu'il entend jusqu'au d√©but de votre prochain tour (b√©n√©ficiant de tous ses sens sp√©ciaux)<br>‚Ä¢ Peut d√©livrer vos sorts de contact (dans un rayon de 30 m√®tres, en prenant une r√©action)<br><br><strong>Combat :</strong><br>‚Ä¢ Le familier est un alli√© pour vous et vos alli√©s<br>‚Ä¢ Lance sa propre Initiative et agit √† son propre tour<br>‚Ä¢ Ne peut pas attaquer, mais peut effectuer d'autres actions normalement<br><br><strong>Disparition et rappel :</strong><br>‚Ä¢ Dispara√Æt quand il tombe √† 0 point de vie (r√©appara√Æt en relan√ßant ce sort)<br>‚Ä¢ Peut √™tre temporairement renvoy√© dans une dimension de poche (action de Magie)<br>‚Ä¢ Peut √™tre rappel√© dans un espace inoccup√© dans un rayon de 9 m√®tres (action de Magie)<br>‚Ä¢ Laisse derri√®re lui tout ce qu'il portait ou transportait quand il dispara√Æt<br><br><strong>Limitation :</strong><br>Vous ne pouvez pas avoir plus d'un familier √† la fois. Si vous lancez ce sort alors que vous avez un familier, vous lui faites adopter une nouvelle forme √©ligible.",
        "higher_levels": "",
        "origin": "Player's Handbook 2024 (BR)",
        "learned": true,
        "learning_source": "Librairie de l'Unseen University",
        "comment": "Un familier est un atout incroyablement utile. Certes, il ne peut pas attaquer, mais il peut faire plein d'autres choses : transporter des objets entre les membres du groupe, utiliser l'action d'Aide et explorer les environs pour d√©tecter les dangers. Les familiers ont tr√®s peu de points de vie, mais vous pouvez toujours les invoquer √† nouveau si vous avez les composants valant 10 po sous la main. Pass√©s les premiers niveaux, la mort de votre familier n'est donc plus qu'un d√©sagr√©ment mineur. En g√©n√©ral, la chouette est le meilleur choix, gr√¢ce √† son aptitude ‚ÄúVol stationnaire‚Äù qui lui permet de voler au milieu des ennemis et d'en ressortir sans provoquer d'attaques d'opportunit√©, pour utiliser l'action d'Aide. Vous pouvez aussi trouver des buffs sp√©cifiques, comme Souffle de dragon, √† lancer sur votre familier pour en faire une v√©ritable menace en combat.",
        "score": 4
    },
    {
        "name": "Armure de mage",
        "name_en": "Mage Armor",
        "level": 1,
        "school": "Abjuration",
        "class": ["Ensorceleur", "Magicien"],
        "casting_time": "Action",
        "range": "Contact",
        "components": ["V", "S", "M (un morceau de cuir tann√©)"],
        "concentration": false,
        "ritual": false,
        "reaction": false,
        "duration": "8 heures",
        "description": "Vous touchez une cr√©ature consentante qui ne porte pas d'armure.<br><br><strong>Effet :</strong><br>‚Ä¢ La CA de base de la cible passe √† 13, plus son modificateur de Dext√©rit√©<br>‚Ä¢ Dure jusqu'√† la fin du sort<br><br><strong>Fin pr√©matur√©e :</strong><br>Le sort prend fin si la cible porte une armure.",
        "higher_levels": "",
        "origin": "Player's Handbook 2024 (BR)",
        "learned": false,
        "learning_source": "",
        "comment": "Une excellente source de CA, mais elle impose un tribut permanent √† vos emplacements de sorts : 13 + Dext√©rit√© cesse d'√™tre efficace √† mesure que les bonus d'attaque des ennemis augmentent, tandis que votre Dext√©rit√© reste statique pour laisser toute la place √† votre Intelligence.<br><br>L'Armure du Mage devient vraiment utile si vous avez d'autres personnages faiblement prot√©g√©s dans votre groupe. L'apprendre juste pour vous peut sembler une perte, mais si vous la lancez sur des bardes, des druides, des guerriers, des r√¥deurs, des roublards et des ensorceleurs, alors soudain, ce sort de bas niveau devient la pierre angulaire de la d√©fense de tout votre groupe.",
        "score": 3
    },
    {
        "name": "Projectile magique",
        "name_en": "Magic Missile",
        "level": 1,
        "school": "√âvocation",
        "class": ["Ensorceleur", "Magicien"],
        "casting_time": "Action",
        "range": "36 m",
        "components": ["V", "S"],
        "concentration": false,
        "ritual": false,
        "reaction": false,
        "duration": "Instantan√©e",
        "description": "Vous cr√©ez trois fl√©chettes lumineuses de force magique.<br><br><strong>Ciblage :</strong><br>‚Ä¢ Chaque fl√©chette touche une cr√©ature de votre choix que vous pouvez voir et √† port√©e<br>‚Ä¢ Les fl√©chettes frappent toutes simultan√©ment<br>‚Ä¢ Vous pouvez les diriger pour toucher une ou plusieurs cr√©atures<br><br><strong>D√©g√¢ts :</strong><br>Une fl√©chette inflige 1d4 + 1 point de d√©g√¢ts de force √† sa cible.",
        "higher_levels": "Le sort cr√©e une fl√©chette suppl√©mentaire pour chaque niveau d'emplacement de sort sup√©rieur √† 1.",
        "origin": "Player's Handbook 2024 (BR)",
        "learned": false,
        "learning_source": "",
        "comment": "Une excellente option avec une port√©e impressionnante et des d√©g√¢ts fiables du meilleur type de d√©g√¢ts qui soit. Les calculs sont un peu capricieux, mais Projectiles magiques reste le meilleur sort de d√©g√¢ts monocible de niveau 1.",
        "score": 4
    },
    {
        "name": "Bouclier",
        "name_en": "Shield",
        "level": 1,
        "school": "Abjuration",
        "class": ["Ensorceleur", "Magicien"],
        "casting_time": "R√©action, que vous prenez lorsque vous √™tes touch√© par un jet d'attaque ou cibl√© par le sort Projectile magique",
        "range": "Personnelle",
        "components": ["V", "S"],
        "concentration": false,
        "ritual": false,
        "reaction": true,
        "duration": "1 round",
        "description": "Une barri√®re imperceptible de force magique vous prot√®ge.<br><br><strong>Effets jusqu'au d√©but de votre prochain tour :</strong><br>‚Ä¢ Bonus de +5 √† la CA (y compris contre l'attaque d√©clenchante)<br>‚Ä¢ Immunit√© aux d√©g√¢ts de Projectile Magique",
        "higher_levels": "",
        "origin": "Player's Handbook 2024 (BR)",
        "learned": true,
        "learning_source": "Librairie de l'Unseen University",
        "comment": "Le fait que vous puissiez lancer ce sort apr√®s avoir entendu le r√©sultat du jet d'attaque signifie que vous pouvez souvent transformer une touche en √©chec. En plus de l'Armure du Mage, cela vous permet d'atteindre efficacement une CA de 17 + Dext√©rit√© tant que vous avez encore des emplacements de sort de niveau 1 √† sacrifier.",
        "score": 4
    },
    {
        "name": "Image silencieuse",
        "name_en": "Silent Image",
        "level": 1,
        "school": "Illusion",
        "class": ["Barde", "Ensorceleur", "Magicien"],
        "casting_time": "Action",
        "range": "18 m",
        "components": ["V", "S", "M (un peu de laine)"],
        "concentration": true,
        "ritual": false,
        "reaction": false,
        "duration": "Concentration, jusqu'√† 10 minutes",
        "description": "Vous cr√©ez l'image d'un objet, d'une cr√©ature ou d'un autre ph√©nom√®ne visible.<br><br><strong>Caract√©ristiques de l'image :</strong><br>‚Ä¢ Ne d√©passe pas un cube de 4,5 m√®tres de c√¥t√©<br>‚Ä¢ Appara√Æt √† un endroit √† port√©e<br>‚Ä¢ Persiste pendant toute la dur√©e du sort<br>‚Ä¢ Purement visuelle (aucun son, odeur ou autre effet sensoriel)<br><br><strong>Contr√¥le de l'image :</strong><br>‚Ä¢ Par une action Magie : d√©placer l'image n'importe o√π √† port√©e<br>‚Ä¢ Lors du d√©placement : modifier son apparence pour que ses mouvements paraissent naturels<br>‚Ä¢ Exemple : faire marcher l'image d'une cr√©ature quand vous la d√©placez<br><br><strong>D√©tection de l'illusion :</strong><br>‚Ä¢ Interaction physique : r√©v√®le l'illusion (les objets peuvent la traverser)<br>‚Ä¢ Action √âtude : jet d'Intelligence (Investigation) contre le DD de sauvegarde de votre sort<br>‚Ä¢ En cas de r√©ussite : la cr√©ature peut voir √† travers l'image",
        "higher_levels": "",
        "origin": "Player's Handbook 2024 (BR)",
        "learned": false,
        "learning_source": "",
        "comment": "Bien qu'il ne soit pas aussi puissant qu'Image majeure, si vous voulez juste un objet ou un effet visuel, Image silencieuse fera parfaitement l'affaire. Cr√©ez un faux mur, une porte ou une herse pour ralentir vos poursuivants. Inventez un meuble, cachez-vous √† l'int√©rieur et poignardez ceux qui oseront l'ouvrir. Les illusions sont plus limit√©es par votre imagination (et la bonne volont√© de votre MJ) que par le texte du sort lui-m√™me.",
        "score": 4
    },
    {
        "name": "Barbes argent√©es",
        "name_en": "Silvery Barbs",
        "level": 1,
        "school": "Enchantement",
        "class": ["Barde", "Ensorceleur", "Magicien"],
        "casting_time": "1 r√©action, que vous prenez lorsqu'une cr√©ature que vous pouvez voir dans un rayon de 18 m√®tres de vous r√©ussit un jet d'attaque, un test de caract√©ristique ou un jet de sauvegarde",
        "range": "18 m",
        "components": ["V"],
        "concentration": false,
        "ritual": false,
        "reaction": true,
        "duration": "Instantan√©e",
        "description": "Vous distrayez magiquement la cr√©ature d√©clenchante et transformez son incertitude momentan√©e en encouragement pour une autre cr√©ature.<br><br><strong>Effet sur la cr√©ature d√©clenchante :</strong><br>‚Ä¢ Doit relancer le d20 et utiliser le r√©sultat le plus bas<br><br><strong>Effet d'encouragement :</strong><br>‚Ä¢ Vous choisissez une cr√©ature diff√©rente que vous pouvez voir √† port√©e (vous pouvez vous choisir)<br>‚Ä¢ La cr√©ature choisie a l'avantage sur le prochain jet d'attaque, test de caract√©ristique ou jet de sauvegarde qu'elle effectue dans la minute suivante<br><br><strong>Limitation :</strong><br>Une cr√©ature ne peut √™tre renforc√©e que par une seule utilisation de ce sort √† la fois.",
        "higher_levels": "",
        "origin": "Strixhaven: A Curriculum of Chaos",
        "learned": true,
        "learning_source": "Librairie de l'Unseen University",
        "comment": "Extr√™mement puissant, mais √©galement tr√®s complexe. Pour plus de d√©tails sur les innombrables fa√ßons (et parfois douteuses) de d√©tourner ce sort, voyez mon <a href=\"https://rpgbot.net/dnd-5es-silvery-barbs/\" target=\"_blank\">Guide sur les Barbes argent√©es</a>.",
        "score": 4
    },
    {
        "name": "Sommeil",
        "name_en": "Sleep",
        "level": 1,
        "school": "Enchantement",
        "class": ["Barde", "Ensorceleur", "Magicien"],
        "casting_time": "Action",
        "range": "18 m",
        "components": ["V", "S", "M (une pinc√©e de sable ou des p√©tales de rose)"],
        "concentration": true,
        "ritual": false,
        "reaction": false,
        "duration": "Concentration, jusqu'√† 1 minute",
        "description": "Toute cr√©ature de votre choix dans une sph√®re de 1,50 m de rayon centr√©e sur un point √† port√©e doit r√©ussir un jet de sauvegarde de Sagesse.<br><br><strong>√âchec au premier jet :</strong><br>‚Ä¢ √âtat Incapable d'agir jusqu'√† la fin de son prochain tour<br>‚Ä¢ Doit refaire le jet de sauvegarde<br><br><strong>√âchec au deuxi√®me jet :</strong><br>‚Ä¢ √âtat Inconscient pendant toute la dur√©e du sort<br><br><strong>Fin pr√©matur√©e du sort :</strong><br>‚Ä¢ Si une cible subit des d√©g√¢ts<br>‚Ä¢ Si une personne dans un rayon de 1,50 m entreprend une action pour la lib√©rer<br><br><strong>Immunit√©s :</strong><br>Les cr√©atures qui ne dorment pas (comme les elfes) ou qui sont immunis√©es contre l'√©tat √âpuisement r√©ussissent automatiquement leurs jets de sauvegarde.",
        "higher_levels": "",
        "origin": "Player's Handbook 2024 (BR)",
        "learned": true,
        "learning_source": "Librairie de l'Unseen University",
        "comment": "Avec une moyenne de 22,5 PV de cr√©atures affect√©es, vous ne pourrez pas toucher grand monde si elles sont en pleine forme, mais vous pouvez toujours attendre de les user un peu avant de les achever avec Sommeil. Sommeil n'exige pas de jet de sauvegarde, ce qui en fait un moyen puissant et fiable d'incapaciter des ennemis peu robustes, m√™me √† haut niveau.",
        "score": 4
    }
]













    </script>

    <script>
        class SpellbookApp {
            constructor() {
                this.spells = [];
                this.filteredSpells = [];
                this.init();
            }

            async init() {
                await this.loadSpells();
                this.setupEventListeners();
                this.populateFilters();
                this.updateStats();
                this.renderSpells();
            }

            async loadSpells() {
                try {
                    console.log('Loading spells from spellbook.json...');
                    const response = await fetch('spellbook.json');
                    console.log('Response status:', response.status);
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    this.spells = await response.json();
                    // Ensure each spell has a comment property, even if empty
                    this.spells = this.spells.map(spell => ({
                        ...spell,
                        comment: spell.comment || ""
                    }));
                    
                    // Sort spells: learned first, then by level, then alphabetically by French name
                    this.sortSpells();
                    
                    console.log('Loaded spells from external file:', this.spells.length);
                    this.filteredSpells = [...this.spells];
                } catch (error) {
                    console.log('Could not load external JSON, using embedded data fallback');
                    
                    // Fallback: Load from embedded script tag
                    const spellDataElement = document.getElementById('spell-data');
                    if (spellDataElement) {
                        try {
                            this.spells = JSON.parse(spellDataElement.textContent);
                            // Ensure each spell has a comment property, even if empty
                            this.spells = this.spells.map(spell => ({
                                ...spell,
                                comment: spell.comment || ""
                            }));
                            
                            // Sort spells: learned first, then by level, then alphabetically by French name
                            this.sortSpells();
                            
                            console.log('Loaded spells from embedded data:', this.spells.length);
                            this.filteredSpells = [...this.spells];
                        } catch (parseError) {
                            console.error('Error parsing embedded spell data:', parseError);
                            this.handleLoadError();
                        }
                    } else {
                        this.handleLoadError();
                    }
                }
            }
            
            sortSpells() {
                // Sort spells: learned first, then by level, then alphabetically by French name
                this.spells.sort((a, b) => {
                    // First, sort by learned status (learned first)
                    if (a.learned !== b.learned) {
                        return a.learned ? -1 : 1;
                    }
                    
                    // Then, sort by level (ascending)
                    if (a.level !== b.level) {
                        return a.level - b.level;
                    }
                    
                    // Finally, sort alphabetically by French name
                    return a.name.localeCompare(b.name, 'fr');
                });
            }

            handleLoadError() {
                document.getElementById('spell-grid').innerHTML = 
                    `<p style="text-align: center; color: #8b4513; font-size: 1.2em; grid-column: 1/-1;">
                        Erreur lors du chargement du livre de sorts.<br>
                        <small>Pour utiliser le fichier JSON externe, servez cette page via un serveur web.<br>
                        Commande: <code>python3 -m http.server 8000</code> puis ouvrez <code>http://localhost:8000/spellbook.html</code></small>
                    </p>`;
            }

            setupEventListeners() {
                document.getElementById('search').addEventListener('input', (e) => {
                    this.filterSpells();
                });

                document.getElementById('level-filter').addEventListener('change', () => {
                    this.filterSpells();
                });

                document.getElementById('school-filter').addEventListener('change', () => {
                    this.filterSpells();
                });

                document.getElementById('class-filter').addEventListener('change', () => {
                    this.filterSpells();
                });

                document.getElementById('learned-filter').addEventListener('change', () => {
                    this.filterSpells();
                });
            }

            populateFilters() {
                const schools = [...new Set(this.spells.map(spell => spell.school))].sort();
                const schoolFilter = document.getElementById('school-filter');
                schools.forEach(school => {
                    const option = document.createElement('option');
                    option.value = school;
                    option.textContent = school;
                    schoolFilter.appendChild(option);
                });

                const classes = [...new Set(this.spells.flatMap(spell => spell.class))].sort();
                const classFilter = document.getElementById('class-filter');
                classes.forEach(cls => {
                    const option = document.createElement('option');
                    option.value = cls;
                    option.textContent = cls;
                    classFilter.appendChild(option);
                });
            }

            filterSpells() {
                const searchTerm = document.getElementById('search').value.toLowerCase();
                const levelFilter = document.getElementById('level-filter').value;
                const schoolFilter = document.getElementById('school-filter').value;
                const classFilter = document.getElementById('class-filter').value;
                const learnedFilter = document.getElementById('learned-filter').value;

                this.filteredSpells = this.spells.filter(spell => {
                    const matchesSearch = spell.name.toLowerCase().includes(searchTerm) ||
                                        spell.description.toLowerCase().includes(searchTerm);
                    const matchesLevel = !levelFilter || spell.level.toString() === levelFilter;
                    const matchesSchool = !schoolFilter || spell.school === schoolFilter;
                    const matchesClass = !classFilter || spell.class.includes(classFilter);
                    const matchesLearned = !learnedFilter || 
                                         (learnedFilter === 'learned' && spell.learned) ||
                                         (learnedFilter === 'not-learned' && !spell.learned);

                    return matchesSearch && matchesLevel && matchesSchool && matchesClass && matchesLearned;
                });
                
                // Make sure filtered spells maintain the same order
                // No need to sort again - the original array is already sorted and filter preserves order
                
                this.renderSpells();
            }

            updateStats() {
                const totalSpells = this.spells.length;
                const learnedSpells = this.spells.filter(spell => spell.learned).length;

                // Update total counts
                document.getElementById('total-spells').textContent = totalSpells;
                document.getElementById('learned-spells').textContent = learnedSpells;

                // Update total counts by level (0-9)
                for (let level = 0; level <= 9; level++) {
                    const totalAtLevel = this.spells.filter(spell => spell.level === level).length;
                    const learnedAtLevel = this.spells.filter(spell => spell.level === level && spell.learned).length;
                    
                    const totalElement = level === 0 ? 
                        document.getElementById('total-cantrips') : 
                        document.getElementById(`total-level${level}`);
                    const learnedElement = level === 0 ? 
                        document.getElementById('learned-cantrips') : 
                        document.getElementById(`learned-level${level}`);
                    
                    if (totalElement) totalElement.textContent = totalAtLevel;
                    if (learnedElement) learnedElement.textContent = learnedAtLevel;
                }
            }

            renderSpells() {
                const spellGrid = document.getElementById('spell-grid');
                
                if (this.filteredSpells.length === 0) {
                    spellGrid.innerHTML = '<p style="text-align: center; color: #8b4513; font-size: 1.2em; grid-column: 1/-1;">Aucun sort trouv√©.</p>';
                    return;
                }

                spellGrid.innerHTML = this.filteredSpells.map(spell => this.createSpellCard(spell)).join('');
            }

            createSpellCard(spell) {
                const levelText = spell.level === 0 ? 'Cantrip' : `Niveau ${spell.level}`;
                const components = spell.components.join(', ');
                const classes = spell.class.map(cls => `<span class="class-tag">${cls}</span>`).join('');
                const higherLevels = spell.higher_levels ? 
                    `<div class="higher-levels"><strong>Aux niveaux sup√©rieurs:</strong> ${spell.higher_levels}</div>` : '';
                const learnedStatus = spell.learned ? 'learned' : 'not-learned';
                const learnedText = spell.learned ? 'Appris' : 'Non Appris';
                
                // Create score display (stars from 1-4)
                const score = spell.score || 0;
                const scoreIcons = [];
                for (let i = 1; i <= 4; i++) {
                    if (i <= score) {
                        scoreIcons.push('<span class="score-icon score-star">‚òÖ</span>');
                    } else {
                        scoreIcons.push('<span class="score-icon score-empty">‚òÜ</span>');
                    }
                }
                const scoreHtml = score > 0 ? `<span class="spell-score">${scoreIcons.join('')}</span>` : '';
                
                // Create icons for ritual, concentration, and reaction
                const icons = [];
                if (spell.ritual) {
                    icons.push('<span class="spell-icon ritual-icon">Rituel</span>');
                }
                if (spell.concentration) {
                    icons.push('<span class="spell-icon concentration-icon">Concentration</span>');
                }
                if (spell.reaction) {
                    icons.push('<span class="spell-icon reaction-icon">R√©action</span>');
                }
                const iconsHtml = icons.length > 0 ? `<div class="spell-icons">${icons.join('')}</div>` : '';

                // Learning source section for learned spells
                const learningSource = spell.learned && spell.learning_source ? 
                    `<div class="learning-source">
                        <div class="learning-source-label">Appris via :</div>
                        <div>${spell.learning_source}</div>
                    </div>` : '';

                return `
                    <div class="spell-card ${learnedStatus}" data-school="${spell.school}">
                        <div class="learned-status ${learnedStatus}">${learnedText}</div>
                        <div class="spell-header">
                            <h3 class="spell-name">${spell.name}${scoreHtml}${spell.name_en ? `<br><span class="spell-name-en">[${spell.name_en}]</span>` : ''}</h3>
                            <div class="spell-level level-${spell.level}">${levelText}</div>
                        </div>
                        
                        <div class="spell-school">${spell.school}</div>
                        
                        ${iconsHtml}
                        
                        <div class="spell-classes">${classes}</div>
                        
                        <div class="spell-details">
                            <div class="detail-item">
                                <div class="detail-label">Temps d'incantation</div>
                                <div class="detail-value">${spell.casting_time}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Port√©e</div>
                                <div class="detail-value">${spell.range}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Composantes</div>
                                <div class="detail-value">${components}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Dur√©e</div>
                                <div class="detail-value">${spell.duration}</div>
                            </div>
                        </div>
                        
                        <div class="spell-description">${spell.description}</div>
                        
                        ${higherLevels}
                        
                        ${learningSource}
                        
                        ${spell.comment ? `<div class="spell-comment"><em>${spell.comment}</em></div>` : ''}
                        
                        <div class="spell-origin">${spell.origin}</div>
                    </div>
                `;
            }
        }

        // Initialize the app when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new SpellbookApp();
        });
    </script>
</body>
</html>